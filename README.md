# Экосистема языка программирования C$ (Си-якорь).
```
Прогресс создания …

… компилятора (не прямого типа — JIT/AOT формы), компиляция в промежуточное представление — байт-код:
[●●··································································································] 2/100%

… интерпретатора (виртуально(-го/-ой) процессора/машины):
[●●●●●●●●●●··························································································] 10/100%

… компилятора (прямого типа — AOT форма), компиляция в машинный/нативный/оп-код для архитектуры процессоров x86 (CISC) под OS Windows/Biome:
[●···································································································] 1/100%


Общий прогресс:
[●●●●●·······························································································] 5/100%
```
```
                      +----------------------------------+
                      ¦ Препроцессор  v.0.1 (22.11.2025) ¦
+---+-----------------+----------------------------------+-------+--------------+
¦ № ¦ Задача                                                     ¦ Реализовано? ¦
+---+------------------------------------------------------------+--------------+
¦ 1 ¦ Удаление однострочных комментариев, без учёта вложенности  ¦      [V]     ¦
¦ 2 ¦ Удаление многострочных комментариев, без учёта вложенности ¦      [V]     ¦
¦ 3 ¦ Удаление многострочных комментариев, с учётом вложенности  ¦      [X]     ¦
¦ 4 ¦ Подстановка макросов                                       ¦      [X]     ¦
+---+------------------------------------------------------------+--------------+
                        Компилятор v.0.1
-----------------------------------------------------------------------------------------------------------------------------
Часть: Frontend
-
Компонент/модуль: Лексический анализатор
№ | Задача                                                                Реализовано?
1 | -                                                                          [V]

Компонент/модуль: Синтаксический анализатор (проверяет структуру)
№ | Задача                                                                Реализовано?
1 | -                                                                          [V]

Компонент/модуль: Семантический анализатор (проверяет поведение)
№ | Задача                                                                Реализовано?
1 | -                                                                          [X]

Компонент/модуль: Генератор HL-IR
№ | Задача                                                                                                   Реализовано?
1 | Из абстрактного синтаксического дерева (AST) сформировать линейное высокоуровневое IR (псевдокод)            [X]

Компонент/модуль: Генератор ML-IR
№ | Задача                                                                                                   Реализовано?
1 | -                                                                                                            [X]


Компонент/модуль: Генератор LL-IR
№ | Задача                                                                                                   Реализовано?
1 | -                                                                                                            [X]

Компонент/модуль: Оптимизатор кода (применяется над HL-IR/ML-IR/LL-IR)
№ | Задача                                                                                        Реализовано?
1 | На вход подаётся неоптимизированный IR-код, на выходе имеем оптимизированный IR-код               [X]
-----------------------------------------------------------------------------------------------------------------------------
Часть: Backend
-
Компонент/модуль: Генератор ассемблерного кода (под разную архитектуру процессоров, интерпретаторов)
№ | Задача                                                                Реализовано?
1 | -                                                                         [X]

Компонент/модуль: Генератор байт-кода/(машинного/нативного) оп-кода (под разную архитектуру процессоров, интерпретаторов)
№ | Задача                                                                Реализовано?
1 | -                                                                         [X]
-----------------------------------------------------------------------------------------------------------------------------
```
```
-- - - - - - - - - - - - - --
Compiler C$ (C-anchor) v.0.1
-- - - - - - - - - - - - - --

+----------------------+
¦ Опции флагов (общие) ¦
¦                      +--------------------------------------+
¦ -p               ; Игнорировать препроцессор [По умолчанию] ¦
¦ +p               ; Запустить скрытый механизм препроцессора ¦
¦ +p file_name.ca  ; Запустить видимый механизм препроцессора ¦
+-------------------------------------------------------------+
+----------------------------------------+
¦ Опции флагов под компиляцию в байт-код ¦
¦                                        +----------------------------------------------------------------+
¦ -c=asm_vm               ; Игнорировать компиляцию в ассемблерный код интерпретатора (ВМ) [По умолчанию] ¦
¦ +c=asm_vm               ; Запустить скрытый механизм компиляции в ассемблерный код интерпретатора (ВМ)  ¦
¦ +c=asm_vm file_name.ca  ; Запустить видимый механизм компиляции в ассемблерный код интерпретатора (ВМ)  ¦
¦                                                                                                         ¦
¦ -c=cabc                 ; Игнорировать компиляцию в байт-код [По умолчанию]                             ¦
¦ +c=cabc                 ; --                                                                            ¦
¦ +c=cabc file_name.ca    ; Запустить видимый механизм компиляции в байт-код                              ¦
+---------------------------------------------------------------------------------------------------------+
+------------------------------------------------------------------------+
¦ Опции флагов под компиляцию в машинный (нативный) код OS Windows/Biome ¦
¦                                                                        +-------------+
¦ -c=easm               ; Игнорировать компиляцию в ассемблерный код [По умолчанию]    ¦
¦ +c=easm               ; Запустить скрытый механизм компиляции в ассемблерный код     ¦
¦ +c=easm file_name.ca  ; Запустить видимый механизм компиляции в ассемблерный код     ¦
¦                                                                                      ¦
¦ -c=bin               ; Игнорировать компиляцию в бинарный (сырой) код [По умолчанию] ¦
¦ +c=bin               ; --                                                            ¦
¦ +c=bin file_name.ca  ; --                                                            ¦
¦                                                                                      ¦
¦ -c=obj               ; Игнорировать компиляцию в объектный модуль [По умолчанию]     ¦
¦ +c=obj               ; Запустить скрытый механизм компиляции в объектный модуль      ¦
¦ +c=obj file_name.ca  ; Запустить видимый механизм компиляции в объектный модуль      ¦
¦                                                                                      ¦
¦ -c=exe               ; Игнорировать компиляцию в исполняемый модуль [По умолчанию]   ¦
¦ +c=exe               ; --                                                            ¦
¦ +c=exe file_name.ca  ; Запустить видимый механизм компиляции в исполняемый модуль    ¦
+--------------------------------------------------------------------------------------+

Препроцессор может быть как отдельным модулем (без участия компилятора), так и совместным (в двух вариантах).
-
Если хотите задействовать только препроцессорную обработку, следует использовать опцию флага +p file_name. На выходе получаем обработанный исходный код. Компиляция при этом не запускается.
Если необходимо произвести препроцессорную обработку и компиляцию, при этом получить файл после препроцессорной обработки, используйте опцию флага +p file_name +c=... .
Если хотите задействовать только компилятор, используйте опцию флага -p +c=... или +c=... .


 [ Управление комментариями на уровне препроцессора (отдельный модуль/компонент?)]

Убрать препроцессором:
 +p comment=d file_name.ca                           ; Комментарии не добавляются в новый файл с исходным кодом - preprocessing/file.ca
 +p comment=d (без создания файла, для компилятора)  ; Комментарии в компилятор не попадают

Оставить препроцессором:
 +p comment=s file_name.ca                           ; С сохранением комментариев в новом файле с исходным кодом - preprocessing/file.ca
 +p comment=s (без создания файла, для компилятора)  ; Комментарии уходят в компилятор


 [ Управление комментариями на уровне компилятора ]

Убрать компилятором:
 +c=asm_vm comment=d file_name.ca  ; Комментарии не добавляются в новый файл с исходным кодом интерпретатор (ВМ) - source_code/asm_vm/file_name.asm
 +c=easm comment=d file_name.ca    ; Комментарии не добавляются в новый файл с исходным кодом под CPU - source_code/easm/file_name.asm

Оставить компилятором:
 +c=asm_vm comment=s file_name.ca  ; Комментарии добавляются в новый файл с исходным кодом под интерпретатор (ВМ) - source_code/asm_vm/file_name.asm
 +c=easm comment=s file_name.ca    ; Комментарии добавляются в новый файл с исходным кодом под CPU - source_code/easm/file_name.asm
```
``` Таблица команд интерпретатора ```
```
-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --
     Байт (СС)             Мнемоническая символика (синтаксис)
¦ в 16-й ¦ в 10-й ¦ Символ ¦ на ассемблере ¦ на bf-подобном ¦ Операция
-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --
¦ 2B     ¦ 043    ¦ +      ¦ INC/inc       ¦ +              ¦ Инкремент
-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --
¦ 2D     ¦ 045    ¦ -      ¦ DEC/dec       ¦ -              ¦ Декремент
-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --
¦ 3C     ¦ 060    ¦ <      ¦               ¦ <              ¦ Смещение указателя на позицию назад
-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --
¦ 3D     ¦ 061    ¦ =      ¦ JMP/jmp       ¦                ¦ Смещение в определённую позицию
-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --
¦ 3E     ¦ 062    ¦ >      ¦               ¦ >              ¦ Смещение указателя на позицию вперёд
-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --
¦ 2E     ¦ 046    ¦ .      ¦               ¦ .              ¦ Считывание (получение) данных из памяти
-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --
¦ 2C     ¦ 044    ¦ ,      ¦               ¦ ,              ¦ Считывание (установка) данных в память
-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --

ADD/add | Сложение
SUB/sub | Вычитание
MUL/mul | Умножение
DIV/div | Деление
CALL/call | Вызвать процедуру
PUSH/push | Положить на верхушку стека
POP/pop | Снять со стека
RET/ret | Вернуться из процедуры
LOOP/loop | Повторить действия
CMP/cmp | Сравнение
JZ/jz | Прыгни если ноль   // Jump if Zero / if (!cmp('$', '$')){} / if (1){}
JE/je | Прыгни если равно  // Jump if Equal / if (!cmp('$', '$')){} / if (1){}
```
